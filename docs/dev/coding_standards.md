# 编码规范

## 概述

本文档定义了 FastQTools 项目的编码规范，以确保代码的一致性、可读性和可维护性。

## C++ 标准

- **语言版本**: C++20
- **编译器要求**: GCC >= 11, Clang >= 12

## 代码风格

### 格式化
- **工具**: 使用 `.clang-format` 文件中定义的规则进行自动代码格式化。
- **脚本**: 运行 `./scripts/format.sh` 来格式化整个项目。

### 命名约定

- **文件和目录**: `snake_case` (下划线命名法)，例如 `file_parser.h`, `src/utils/`。
- **类/结构体/枚举**: `PascalCase` (帕斯卡命名法)，例如 `class FastQReader;`。
- **函数/方法**: `snake_case` (下划线命名法)，例如 `void process_file();`。
- **变量**: `snake_case` (下划线命名法)，例如 `int read_count = 0;`。
- **成员变量**: `m_` 前缀加 `snake_case`，例如 `m_file_path`。
- **常量/枚举值**: `UPPER_SNAKE_CASE` (大写下划线命名法)，例如 `constexpr int MAX_READS = 1000;`。
- **命名空间**: `snake_case` (下划线命名法)，例如 `namespace fq::utils { ... }`。

### 代码组织

- **头文件**: 使用 `#pragma once` 防止头文件重复包含。
- **包含顺序**: 1. C++标准库, 2. 第三方库, 3. 本项目其他模块。
- **接口与实现分离**: 头文件 (`.h`) 只包含声明，实现细节放在源文件 (`.cpp`) 中。

## 现代 C++ 实践

- **资源管理**: 优先使用 RAII 和智能指针 (`std::unique_ptr`, `std::shared_ptr`)。禁止裸露的 `new` 和 `delete`。
- **函数声明**: 统一使用尾随返回类型 (`auto func() -> T`)。
- **错误处理**: 优先使用异常处理。为不同类型的错误定义清晰的异常类。
- **常量**: 优先使用 `constexpr`。
- **字符串**: 优先使用 `std::string_view` 作为只读函数参数。

## 文档

- **API 文档**: 在头文件中为所有公共接口编写 Doxygen 风格的注释。
- **代码注释**: 对复杂或不直观的代码逻辑添加必要的注释。

## 工具与自动化

- **静态分析**: 使用 `.clang-tidy` 文件中定义的规则进行静态分析。
- **CI/CD**: 所有代码在合并前必须通过 CI 检查，包括构建、测试、格式化和静态分析。